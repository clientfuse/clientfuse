<div class="dashboard-page">
  <h3 class="title-heading-3">Dashboard</h3>

  <div class="dashboard-content">
    <mat-tab-group>
      <mat-tab label="Default Connection Links">
        <div class="tab-content w-100">
          <div class="header-section">
            <div>
              <div class="subtitle-medium">Default Connection Links</div>
              <div class="body-smaller-text">Use these pre-configured links to quickly share access requests with your clients</div>
            </div>
          </div>

          <div class="links-container">
            <mat-card class="link-card">
              <mat-card-header>
                <mat-card-title>
                  <mat-icon class="card-icon manage-icon">admin_panel_settings</mat-icon>
                  Manage Access Link
                </mat-card-title>
                <mat-card-subtitle>
                  Grant full control to manage campaigns, budgets and assets
                </mat-card-subtitle>
              </mat-card-header>

              <mat-card-content>
                <div class="link-content">
                  <div class="link-field-wrapper">
                    <mat-form-field appearance="outline" class="link-field">
                      <mat-label>Connection Link</mat-label>
                      <input readonly matInput [value]="manageAccessLink()" />
                      <mat-hint>Share this link with clients to grant manage access</mat-hint>
                    </mat-form-field>
                    <button mat-icon-button color="primary"
                            matTooltip="Copy link"
                            class="copy-button"
                            [cdkCopyToClipboard]="manageAccessLink()"
                            (cdkCopyToClipboardCopied)="onCopySuccess()">
                      <mat-icon>content_copy</mat-icon>
                    </button>
                  </div>

                  <div class="action-buttons">
                    <button mat-stroked-button
                            (click)="openCustomizeAccessLinkModal(defaultManageLink()!)">
                      <mat-icon>settings</mat-icon>
                      Customize Link
                    </button>

                    <button mat-stroked-button
                            (click)="openInNewTab(manageAccessLink())">
                      <mat-icon>open_in_new</mat-icon>
                      Open in New Tab
                    </button>
                  </div>
                </div>
              </mat-card-content>
            </mat-card>

            <mat-card class="link-card">
              <mat-card-header>
                <mat-card-title>
                  <mat-icon class="card-icon view-icon">visibility</mat-icon>
                  View Access Link
                </mat-card-title>
                <mat-card-subtitle>
                  View-only access to analytics and reports without editing rights
                </mat-card-subtitle>
              </mat-card-header>

              <mat-card-content>
                <div class="link-content">
                  <div class="link-field-wrapper">
                    <mat-form-field appearance="outline" class="link-field">
                      <mat-label>Connection Link</mat-label>
                      <input readonly matInput [value]="viewAccessLink()" />
                      <mat-hint>Share this link with clients to grant view-only access</mat-hint>
                    </mat-form-field>
                    <button mat-icon-button color="primary"
                            matTooltip="Copy link"
                            class="copy-button"
                            [cdkCopyToClipboard]="viewAccessLink()"
                            (cdkCopyToClipboardCopied)="onCopySuccess()">
                      <mat-icon>content_copy</mat-icon>
                    </button>
                  </div>

                  <div class="action-buttons">
                    <button mat-stroked-button
                            (click)="openCustomizeAccessLinkModal(defaultViewLink()!)">
                      <mat-icon>settings</mat-icon>
                      Customize Link
                    </button>

                    <button mat-stroked-button
                            (click)="openInNewTab(viewAccessLink())">
                      <mat-icon>open_in_new</mat-icon>
                      Open in New Tab
                    </button>
                  </div>
                </div>
              </mat-card-content>
            </mat-card>
          </div>
        </div>
      </mat-tab>
      <mat-tab label="All Connection Links">
        <div class="tab-content w-100">
          <div class="header-section">
            <div>
              <div class="subtitle-medium">All Connection Links</div>
              <div class="body-smaller-text">Manage all your connection links including custom configurations for specific clients</div>
            </div>
          </div>

          <table>
            <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Default</th>
              <th>Connection Link</th>
              <th>Actions</th>
            </tr>
            </thead>
            <tbody>
              @for (link of connectionLinks(); track link._id) {
                <tr>
                  <td>{{ link.name }}</td>
                  <td>
                    <app-badge
                      [text]="link.type === 'view' ? 'View' : 'Manage'"
                      [variant]="link.type === 'view' ? 'info' : 'warning'">
                    </app-badge>
                  </td>
                  <td>
                    @if (link.isDefault) {
                      <mat-icon color="primary">check_circle</mat-icon>
                    } @else {
                      <mat-icon>radio_button_unchecked</mat-icon>
                    }
                  </td>
                  <td>
                    <button mat-icon-button matTooltip="Copy link"
                            [cdkCopyToClipboard]="getConnectionLink(link._id)"
                            (cdkCopyToClipboardCopied)="onCopySuccess()">
                      <mat-icon>content_copy</mat-icon>
                    </button>
                    <button mat-icon-button matTooltip="Open link"
                            (click)="openInNewTab(getConnectionLink(link._id))">
                      <mat-icon>open_in_new</mat-icon>
                    </button>
                  </td>
                  <td>
                    @if (!link.isDefault) {
                      <button mat-icon-button matTooltip="Delete"
                              (click)="deleteConnectionLink(link._id)">
                        <mat-icon>delete</mat-icon>
                      </button>
                      <button mat-icon-button matTooltip="Set as default"
                              (click)="setAsDefaultConnectionLink(link._id)">
                        <mat-icon>star_border</mat-icon>
                      </button>
                    }
                    <button mat-icon-button matTooltip="Customize this link"
                            (click)="openCustomizeAccessLinkModal(link)">
                      <mat-icon>settings</mat-icon>
                    </button>
                  </td>
                </tr>
              }
            </tbody>
          </table>
          <button mat-flat-button color="primary" (click)="createNewConnectionLink()">
            <mat-icon>add</mat-icon>
            Create New Connection Link
          </button>
        </div>
      </mat-tab>
    </mat-tab-group>

    <mat-tab-group>
      <mat-tab label="Client Summary">
        <div class="tab-content w-100">
          <table>
            <thead>
            <tr>
              <th>#</th>
              <th>Client</th>
              <th>Assets</th>
              <th>Requested Partners</th>
              <th>Connections</th>
            </tr>
            </thead>
            <tbody>
            <tr>
              <td>1</td>
              <td><a href="#" class="link link-blue">Teach Fast</a></td>
              <td>
                <ul>
                  <li>✅ Google Analytics Account: styles.com.ua (188251058)</li>
                  <li>⚠️ Meta Ad Account: Main (9068114896565705)</li>
                  <li>✅ Facebook Page: Teach Fast (481084805089953)</li>
                </ul>
              </td>
              <td>
                <ul>
                  <li>Facebook: Old Business (191843779016692)</li>
                  <li>Google: olegbespalko12gmail.com</li>
                </ul>
              </td>
              <td>
                <ul>
                  <li>Tue, Nov 19, 2024 5:48 PM (<a href="#" class="link link-blue">Manage link</a>)</li>
                  <li>Tue, Nov 19, 2024 5:47 PM (<a href="#" class="link link-blue">Manage link</a>)</li>
                </ul>
              </td>
            </tr>
            </tbody>
          </table>
        </div>
      </mat-tab>
      <mat-tab label="Connections">
        <div class="tab-content w-100">
          <table>
            <thead>
            <tr>
              <th>#</th>
              <th>Summary</th>
              <th>Request Details</th>
              <th>Date</th>
              <th>Assets</th>
              <th>Access Level</th>
            </tr>
            </thead>
            <tbody>
            <tr>
              <td>1</td>
              <td><a href="#" class="link link-blue">Summary Details</a></td>
              <td>
                Facebook: Old Business (191843779016692), Google Accounts:
                <a href="#" class="link link-blue">olegbespalko12gmail.com</a>
              </td>
              <td>Tue, Nov 19, 2024 5:48 PM</td>
              <td>
                <ul>
                  <li>✅ Google Analytics Account: styles.com.ua (188251058)</li>
                  <li>⚠️ Meta Ad Account: Main (9068114896565705)</li>
                </ul>
              </td>
              <td>Manage</td>
            </tr>
            <tr>
              <td>2</td>
              <td><a href="#" class="link link-blue">Summary Details</a></td>
              <td>
                Facebook: Old Business (191843779016692)
                <a href="#" class="link link-blue">link</a>
              </td>
              <td>Tue, Nov 19, 2024 5:47 PM</td>
              <td>
                <ul>
                  <li>⚠️ Meta Ad Account: Main (9068114896565705)</li>
                  <li>✅ Facebook Page: Teach Fast (481084805089953)</li>
                </ul>
              </td>
              <td>Manage</td>
            </tr>
            </tbody>
          </table>
        </div>
      </mat-tab>
      <mat-tab label="Custom Requests">
        <div class="tab-content w-100">
          <table>
            <thead>
            <tr>
              <th>#</th>
              <th>Link</th>
              <th>Request Email</th>
              <th>Assets (Requesting Partner)</th>
              <th>Access Level</th>
            </tr>
            </thead>
            <tbody>
            <tr>
              <td>1</td>
              <td><a href="#" class="link link-blue">View 🔗</a></td>
              <td>olegbespalko12gmail.com</td>
              <td>
                <ul>
                  <li>Meta Ad Account (Old Business)</li>
                  <li>Facebook Page (Old Business)</li>
                </ul>
              </td>
              <td>Manage</td>
            </tr>
            </tbody>
          </table>

        </div>
      </mat-tab>
    </mat-tab-group>
  </div>
</div>
